<!DOCTYPE html>
<html lang="pt-br"  xmlns:th="http://www.thymeleaf.org">
<head th:insert="index.html :: head">
    <meta charset="UTF-8">
    <title>Livros</title>
</head>
<body>
<form>
    <input type="hidden" name="id" />

    <label for="titulo">Título:</label>
    <input type="text" id="titulo" name="titulo" />

    <label for="subtitulo">Subtítulo:</label>
    <input type="text" id="subtitulo" name="subTitulo" />

    <label for="isbn">IBSN:</label>
    <input type="text" id="isbn" name="isbn" />

    <label for="autor">Autor:</label>
    <select id="autor" name="autor_id" th:field="${livro.autorId}">
        <option th:each="autor : ${autores}" th:value="${autor.id}" th:text="${autor.nome}"></option>
    </select>

    <label for="editora">Editora:</label>
    <select id="editora" name="editora_id" th:field="${livro.editoraId}">
        <option th:each="editora : ${editoras}" th:value="${editora.id}" th:text="${editora.nome}"></option>
    </select>

    <label for="local">Local:</label>
    <input type="text" id="local"  name="local" />

    <label for="imagem">Imagem:</label>
    <input type="file" id="imagem" accept="image/*" name="file"  />

    <label for="ano">Ano:</label>
    <input type="number" id="ano" name="ano" />
  <br>
    <button th:formaction="@{/livro/cadastrar}" formmethod="post" type="submit" formenctype="multipart/form-data" class="btn btn-dark">Salvar</button>
</form>
<div th:if="${errors}" class="d-none">
    <ul id="listaErros">
        <li th:each='error : ${errors}' th:text='${error.defaultMessage}'></li>
    </ul>
    <script>
        const errorHtml = document.querySelector('#listaErros');
       Swal.fire({
               title: 'Error ao cadastrar',
                icon: 'error',
                html: errorHtml.innerHTML
        })
    </script>
</div>
</body>
</html>