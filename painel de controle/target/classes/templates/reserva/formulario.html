<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:insert="index.html :: head">
    <meta charset="UTF-8">
    <title>Formulário de Reserva</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
</head>
<body>
<div class="container">
    <a type="button" class="btn btn-outline-primary" th:href="@{/}">Home</a>
    <a type="button" class="btn btn-outline-primary" th:href="@{/reserva/lista}">Voltar</a>
    <h1><span th:text="${boasVindas}"></span></h1>

    <form method="post" th:action="@{/reserva/salvar}" th:object="${reserva}">
        <div class="mb-3">
            <input name="id"  th:value="${reserva.id}" type="text" hidden="true">

            <label class="form-label">Aluno</label>
            <select name="alunoId" class="form-select" required>
                <option th:each="aluno : ${listaDeAlunos}" th:value="${aluno.id}" th:text="${aluno.nome}"></option>
            </select>

            <label class="form-label">Livro</label>
            <select name="livroId" class="form-select" required>
                <option th:each="livro : ${listaDeLivros}" th:value="${livro.id}" th:text="${livro.titulo}"></option>
            </select>

            <label class="form-label">Data de Início</label>
            <input name="dataInicio" th:value="${reserva.dataInicio}" type="date" class="form-control" required>

            <label class="form-label">Data de Fim</label>
            <input name="dataFim" th:value="${reserva.dataFim}" type="date" class="form-control" required>

            <label class="form-label">Observação</label>
            <textarea name="observacao" th:text="${reserva.observacao}" class="form-control"></textarea>
        </div>

        <button th:formaction="@{/reserva/cadastrar}" formmethod="post" type="submit" class="btn btn-dark">Salvar</button>

    </form>
</div>
<div th:if="${errors}" class="d-none">
    <ul id="listaErros">
        <li th:each='error : ${errors}' th:text='${error.defaultMessage}'></li>
    </ul>
    <script>
        const errorHtml = document.querySelector('#listaErros');
       Swal.fire({
               title: 'Error ao cadastrar',
                icon: 'error',
                html: errorHtml.innerHTML
        })
    </script>
</div>
</body>
</html>