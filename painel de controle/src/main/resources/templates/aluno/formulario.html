<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:insert="index.html :: head">
    <meta charset="UTF-8">
    <title>Formulário de Aluno</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
</head>
<body>
<div class="container">
    <a type="button" class="btn btn-outline-primary" th:href="@{/}">Home</a>
    <a type="button" class="btn btn-outline-primary" th:href="@{/aluno/lista}">Voltar</a>
    <h1><span th:text="${boasVindas}"></span></h1>

    <form method="post" th:action="@{/aluno/salvar}" th:object="${aluno}">
        <div class="mb-3">
            <input name="id" th:value="${aluno.id}" type="text" hidden="true">

            <label class="form-label">RA</label>
            <input name="ra" th:value="${aluno.ra}" type="number" class="form-control"  required>

            <label class="form-label">Nome</label>
            <input name="nome" th:value="${aluno.nome}" type="text" class="form-control" required >

            <label for="curso">Curso:</label>
            <select id="curso" name="curso_id" th:field="${aluno.cursoId}">
                <option th:each="curso : ${cursos}" th:value="${curso.id}" th:text="${curso.nome}"></option>
            </select>
            <br>
            <label class="form-label">Endereço</label>
            <input name="endereco" th:value="${aluno.endereco}" type="text" class="form-control" required>

            <label class="form-label">Cidade</label>
            <input name="cidade" th:value="${aluno.cidade}" type="text" class="form-control" required>

            <label class="form-label">UF</label>
            <input name="uf" th:value="${aluno.uf}" type="text" class="form-control" required>

            <label class="form-label">Telefone</label>
            <input name="telefone" th:value="${aluno.telefone}" type="number" class="form-control" maxlength="11" required>
        </div>

        <button th:formaction="@{/aluno/cadastrar}" formmethod="post" type="submit" class="btn btn-dark">Salvar</button>
    </form>
</div>
<div th:if="${errors}" class="d-none">
    <ul id="listaErros">
        <li th:each='error : ${errors}' th:text='${error.defaultMessage}'></li>
    </ul>
    <script>
        const errorHtml = document.querySelector('#listaErros');
       Swal.fire({
               title: 'Error ao cadastrar',
                icon: 'error',
                html: errorHtml.innerHTML
        })
    </script>
</div>
</body>
</html>